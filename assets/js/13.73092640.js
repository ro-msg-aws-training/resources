(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{369:function(e,t,r){"use strict";r.r(t);var n=r(45),o=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"containers"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#containers"}},[e._v("#")]),e._v(" Containers")]),e._v(" "),r("p",[e._v("Containers are great for several reasons (i.e. they help us solve the following problems):")]),e._v(" "),r("ul",[r("li",[e._v("They enable us to achieve "),r("a",{attrs:{href:"https://12factor.net/dev-prod-parity",target:"_blank",rel:"noopener noreferrer"}},[e._v("environment parity"),r("OutboundLink")],1),e._v(" with relative ease")]),e._v(" "),r("li",[e._v("They are a great tool for running systems or other tools locally, even complex ones")]),e._v(" "),r("li",[e._v("They enable us to create "),r("a",{attrs:{href:"https://12factor.net/dependencies",target:"_blank",rel:"noopener noreferrer"}},[e._v("self-contained"),r("OutboundLink")],1),e._v(" applications")])]),e._v(" "),r("p",[e._v("You can think of containers as a combination between a simple OS process and an entire virtual machine. Running them is as simple as running a process, yet they contain an entire environment in which our actual application can run. If you want to learn more, check out the "),r("a",{attrs:{href:"https://www.ibm.com/cloud/blog/containers-vs-vms",target:"_blank",rel:"noopener noreferrer"}},[e._v("explanation from IBM"),r("OutboundLink")],1),e._v(" (they do an excellent job in general).")]),e._v(" "),r("p",[e._v("Containers are the concept (think of an OOP interface). There are several implementations of them, by far the most encountered one being "),r("a",{attrs:{href:"https://docs.docker.com/get-started/overview/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h2",{attrs:{id:"docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[e._v("#")]),e._v(" Docker")]),e._v(" "),r("p",[e._v("Docker already provides an excellent documentation for "),r("a",{attrs:{href:"https://docs.docker.com/get-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("getting started"),r("OutboundLink")],1),e._v(" (also checkout the new language-specific section).")]),e._v(" "),r("p",[e._v("Besides running a single container, docker also enables us to run and manage multi-container systems through "),r("strong",[e._v("docker compose")]),e._v(". Moreover, it is able to work with:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.docker.com/storage/volumes/",target:"_blank",rel:"noopener noreferrer"}},[r("strong",[e._v("Volumes")]),r("OutboundLink")],1),e._v(" so we can persist - containers should be "),r("strong",[e._v("ephemeral")]),e._v(", anything we want to store should be outside of them - and share data between containers")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://docs.docker.com/network/",target:"_blank",rel:"noopener noreferrer"}},[r("strong",[e._v("Networks")]),r("OutboundLink")],1),e._v(" so we can configure how containers can talk to each other. There is also a built-in DNS enabling them to communicate using the container/service name instead of the IP address.")]),e._v(" "),r("li",[e._v("And even "),r("a",{attrs:{href:"https://docs.docker.com/engine/swarm/secrets/",target:"_blank",rel:"noopener noreferrer"}},[r("strong",[e._v("secrets")]),r("OutboundLink")],1),e._v(" for storing and sharing sensitive informations such as API keys and connections strings.")])]),e._v(" "),r("p",[e._v("Once we have our application in a decent state, we probably want to run it somewhere. The first step would be to make the images (describing how to create the containers) available (so we or the hosting service can pull them). For this we need a docker registry/repository.")]),e._v(" "),r("h2",{attrs:{id:"ecr"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ecr"}},[e._v("#")]),e._v(" ECR")]),e._v(" "),r("p",[e._v("Elastic Container Registry - an alternative to "),r("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Hub"),r("OutboundLink")],1),e._v(" that's deeply integrated with other AWS services and provides fine-grained access control through "),r("strong",[e._v("IAM")]),e._v(". See "),r("a",{attrs:{href:"https://docs.aws.amazon.com/AmazonECR/latest/userguide/getting-started-cli.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("this guide"),r("OutboundLink")],1),e._v(" on how to work with ECR using the Docker CLI.")]),e._v(" "),r("h2",{attrs:{id:"ecs"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ecs"}},[e._v("#")]),e._v(" ECS")]),e._v(" "),r("p",[e._v("Now that we our application ready and the images are published, we can run it. The simplest option would probably be to spin up a server (EC2 instance), install docker on it, pull the images, and run the containers.")]),e._v(" "),r("p",[e._v("Since the steps are clear, we could automate them or just use "),r("a",{attrs:{href:"https://aws.amazon.com/ecs/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ECS"),r("OutboundLink")],1),e._v(" (Elastic Container Service) (checkout "),r("a",{attrs:{href:"https://aws.amazon.com/getting-started/hands-on/deploy-docker-containers/",target:"_blank",rel:"noopener noreferrer"}},[e._v("this guide"),r("OutboundLink")],1),e._v(" for a basic intro) which already handles all of this for us.")]),e._v(" "),r("p",[e._v("Moreover, ECS integrates well with the docker CLI and even docker compose. You can find out more "),r("a",{attrs:{href:"https://docs.docker.com/cloud/ecs-integration/",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("Exercise")]),e._v(" "),r("p",[r("strong",[e._v("[Level 300]")]),e._v(" Follow "),r("a",{attrs:{href:"https://aws.amazon.com/blogs/containers/deploy-applications-on-amazon-ecs-using-docker-compose/",target:"_blank",rel:"noopener noreferrer"}},[e._v("this guide"),r("OutboundLink")],1),e._v(" to deploy a multi-tier web application on ECS. (Use ECS on EC2 instead of Fargate)")])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("Note that this process of running and managing containers is known as "),r("strong",[e._v("container orchestration")]),e._v(". Docker Compose, Docker Swarm, Kubernetes, ECS, and others ultimately serve this purpose.")])]),e._v(" "),r("p",[e._v("ECS knows how to run containers, but it doesn't know how to provision the resources on which these containers will be running. This is something we have to take care of.")]),e._v(" "),r("p",[e._v("We can either setup an EC2 cluster (can be with just one instance), preferably using an ASG, and tell ECS to run on it (a.k.a. use EC2/ASG as the capacity provider). This even enables us to experiment for free if we are still within the free tier (ECS itself doesn't cost anything).")]),e._v(" "),r("h2",{attrs:{id:"fargate"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fargate"}},[e._v("#")]),e._v(" Fargate")]),e._v(" "),r("p",[e._v("Another capacity provider ECS can use is Fargate. Basically it abstracts EC2 away (AWS calls it serverless compute for containers, but it doesn't really tick all the boxes since you cannot scale it down to zero).")]),e._v(" "),r("h2",{attrs:{id:"eks"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#eks"}},[e._v("#")]),e._v(" EKS")])])}),[],!1,null,null,null);t.default=o.exports}}]);